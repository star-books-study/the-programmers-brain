# Chapter 12. 대규모 시스템의 설계와 개선
- CDN : 인지적 관점에서 코드베이스를 조사하는 기술

## 12.1. 코드베이스의 특성 조사
### 12.1.1. 인지적 차원
#### 오류 경향성
- 오류 경향성 : 일부 프로그래밍 언어에서는 다른 언어보다 실수를 저지르기 쉽다
- 프로그래밍 언어 뿐만 아니라 **코드베이스 역시 일관성 없는 규칙, 문서 부족, 모호한 이름 때문에 오류 경향성이 있다**
    - 코드베이스는 프로그래밍 언어로부터 차원을 상속하는 경우도 있다
- 버그를 찾는 시간과 정확성 면에서 정적 타입은 동적 타입을 능가했다

#### 일관성
- **이름과 규약을 일관성 없이 사용하는** 프레임워크나 언어는 인지 부하를 더 많이 가져올 수 있다

#### 분산성
- 분산성 : 프로그래밍 구성요소가 **얼마나 많은 공간을 차지하는지** (ex. 길이가 긴 메소드)

#### 숨겨진 의존성
- 의존항목이 사용자에게 어느 정도로 **가시적으로** 나타나는지
  - ex) HTML 페이지에 자바스크립트로 제어되는 버튼 존재, 자바스크립트는 다른 파일에 저장된 경우

#### 잠정성
- 잠정성 : 도구를 사용하는 동안 **생각하는 것이 얼마나 쉬운지** (즉, 사고의 수단으로 사용하는 것이 얼마나 쉬운지)
  - 코드베이스나 프로그래밍 언어가 매우 엄격하다면 코드를 사용해 생각을 표현하는 것이 어려울 수 있다 = `잠정성이 낮다`
    - 코드를 실행 모델이 아닌 사고의 수단으로 사용하는 데는 방해가 될 수 있다
- 시스템의 초보자이면 애매한 아이디어와 불완전한 코드를 표현하는 것이 필요할 수 있기에, 잠정성은 학습 능력의 필수 요소이다
- 코드에 대한 계획을 생각하는 동시에, 타입과 문법에 대해서도 생각하면 초보자에게 너무 많은 인지부담을 줄 수 있다

#### 점도
- 점도 : **특정 시스템을 변경하는 것이 얼마나 어려운가**
  - 일반적으로 동적 타입 언어로 작성된 코드를 변경하는 것이 조금 더 쉽다
- 시스템이 변경하기 쉬운지는 프로그래밍 언어와 코드베이스 자체에 달려있을 뿐만 아니라, 코드베이스를 둘러싼 요인도 영향을 미친다
- 코드 변경시 컴파일하거나 테스트 실행에 오랜 시간이 걸린다면 점도는 증가한다

#### 점진적 평가
- 점진적 평가 : 주어진 시스템에서 **부분적인 작업을 확인하거나 실행하는 것이 얼마나 쉬운지**
- 잠정성이 높은 (생각을 표현하기 쉬운) 시스템은 사용자가 불완전한 아이디어를 스케치하는 것이 가능하다
- 점진적 평가를 통해 사용자는 완성되지 않은 코드나 불완전 코드를 실행할 수 있다

#### 역할 표현력
- 역할 표현력 : 프로그램에서 여러 가지 다른 부분의 역할을 얼마나 쉽게 알 수 있는지
    - ex. 함수 끝에 있는 괄호, IDE 내에서의 구문 강조, 불리언 값 필드명 isXXX

#### 매핑 근접성
- 매핑 근접성 : 프로그래밍 언어 또는 코드가 **문제의 해결 영역에 얼마나 가까운지**
  - ex. 코볼은 비즈니스 및 금융과 밀접한 관계를 가진 언어
- 현대 프로그래밍 언어는 어느 문제나 해결할 수 있는 범용적 언어이기에 매핑 근접성이 좋지 않다
- 코드 베이스 역시 비즈니스 영역과의 매핑 근접성이 좋을 수 있다
  - 대상 **도메인의 개념과 단어를 사용**하는 코드베이스는 일반적인 용어를 사용하는 코드베이스보다 대체로 이해하기 쉽다

#### 힘든 정신 활동
- 어떤 시스템에서는 사용자가 시스템 외부에서 힘든 정신 활동을 수행할 때 생각하는 것이 매우 어려울 수 있다
  - 코드베이스 내에서 수행할 수 있는 힘든 정신 활동의 예로는 종종 **사용자가 기억해야 할 것이 많은 상황**이다
  - ex. 많은 매개변수를 올바른 순서로 호출해야 하는 경우 STM 에 많은 요구를 하는 것이기 때문
- 또한 **모호한 함수이름**도 힘든 정신 활동을 초래한다
- **복잡한 연산**들은 작업 기억공간에 부담을 주기에 힘든 일이 될 수 있다

#### 보조 표기법
- 보조 표기법 : 프로그래머가 공식 규격에는 없는 의미를 코드에 추가할 가능성
  - ex. 소스 코드에 주석문을 추가할 가능성

#### 추상화
- 추상화 : 시스템의 사용자가 기본적으로 제공되는 추상화만큼 **강력한 추상화를 만들 수 있는지 여부**
  - 프로그래밍 언어가 허용하는 추상화의 예 : 함수, 객체, 클래스를 만드는 것
  - 사용자가 함수를 만들 수 있다는 사실은 사용자가 자신만의 구성 요소로 언어를 형성하고 자신만의 추상화를 추가할 수 있다는 것을 의미한다
- 라이브러리와 프레임워크는 사용자에게 자신만의 추상화를 만들 수 있는 옵션을 제공할 수 있다

#### 가시성
- 가시성 : 시스템의 다른 부분을 얼마나 쉽게 볼 수 있는지
  - ex. 코드베이스가 여러 파일로 나뉘어 있는 경우

### 12.1.2. 코드베이스 개선을 위해 CDCB 사용
- 코드베이스의 인지적 차원을 정기적으로 분석하는 것이 이상적이다

### 12.1.3. 설계 기동 및 트레이드오프
- 설계 기동 : 코드베이스에서 특정 차원을 개선하기 위해 코드베이스를 변경하는 것
- 설계 기동 (즉, 한 차원의 개선) 으로 인해 다른 차원이 변경되는 경우가 많다

#### 오류 경향성 vs. 점도
- 오류 경향성을 감소하기 위해 타입을 추가할 수 있는데, `타입 시스템`으로 인해 점도가 늘어난다.

#### 잠정성 및 점진적 평가 vs. 오류 경향성
- 잠정성과 점진적 평가가 높은 시스템에서는 미완성되거나 불완전한 코드라도 스케치하고 실행할 수 있다.
- 하지만 이를 완성하지 않은 채 남겨둔다면 오류 경향성에 영향을 미칠 수 있다.

#### 역할 표현력 vs. 분산성
- 명명된 매개변수 같은 문법요소 추가 시 역할 표현력이 개선될 수 있지만, 추가적인 레이블로 인해 코드가 길어진다.

## 12.2. 차원 및 활동
### 12.2.1. 차원이 활동에 미치는 영향
#### 검색
- 숨겨진 `종속성`은 검색 활동에 악영향을 미칠 수 있다
- `분산성`은 코드를 더 길게 만들어서 검색에 부정적인 영향을 준다
- `보조 표기법`은 주석문 및 변수 이름을 통해 검색에 도움을 줄 수 있다

#### 이해
- 코드베이스의 `가시성`이 낮으면 클래스와 기능이 어떻게 관련되는지 파악이 어렵기에 부정적인 영향을 준다
- 변수 및 기타 개체의 유형과 역할이 명확하면 이해하기 쉽기에 `역할표현력`은 이해에 도움이 된다

#### 전사
- 전사할 때 (즉, 미리 정의된 계획을 기반으로 기능을 구현할 때) `일관성` 같은 일부 차원이 나빠질 수 있다
  - 일관된 코드베이스는 이해하기 쉽지만, 새로운 기능을 구현할 때는 코드베이스에 맞춰야 하므로 정신적 노력이 추가로 필요할 수 있다

#### 증가
- 코드베이스에 새 기능 추가 시 가장 도움이 되는 것은 도메인에 대한 `매핑 근접성`이다
- 코드베이스에서 **프로그래밍 개념보다는 코드의 목표를 뚜렷하게 알 수 있다면,** 새로운 코드를 추가하는 것이 더 쉬울 것이다
- 반면 `점도`가 높은 코드베이스에는 코드를 추가하기 어렵다

#### 탐구
- 새로운 설계 아이디어를 탐구할 때 가장 도움이 되는 것은 `잠정성` 과 `점진적 평가`다
- `힘든 정신활동`과 `추상화`는 프로그래머에게 높은 인지 부하를 유발하고, 문제와 해결 공간을 탐구하는 데 사용할 부하를 제한하기에 악영향을 끼칠 수 있다

## 요약
- CDN : 프로그래밍 언어의 사용자들에게 미칠 `인지적 영향을 예측`하는 데 도움이 되는 프레임워크
- 대부분의 경우 **서로 다른 차원 간의 트레이드오프가 이루어져야 한다**
- 설계 기동을 통해 프레임워크의 인지 차원에 따라 기존 코드베이스의 설계를 개선하는 것이 이뤄질 수 있다

> 1. 함수 이름을 모호하게 짓지 말자
