# Chapter 9. 나쁜 코드와 인지 부하를 방지하는 두 가지 프레임워크
- 코드가 `구조적`으로 혼란스러운 경우, `내용` 이 혼란스러운 경우에 코드를 이해하기 어려울 수 있다

## 9.1. 코드 스멜이 인지 부하를 초래하는 경우
- 코드 스멜 : 작동은 하지만 개선의 여지가 있는 코드
  - ex) 매우 긴 메소드, 지나치게 복잡한 스위치 문

### 9.1.1. 코드 스멜에 대한 간략한 소개
- 너무 큰 클래스 : 너무 많은 메소드, 필드를 갖고 있어서 **클래스가 제공하는 추상화를 불명확하게 만들어서는 안된다**
- 데이터 클래스 : 클래스가 데이터만 가져서는 안되고 메소드도 가져야 한다
- 산재한 수정 : 코드 수정을 했을 때 클래스의 여러 부분을 수정해야 한다면 코드 구조가 잘못된 것이다
- 주석문 : 주석문은 그 코드가 무엇을 하는지가 아니라 **왜 거기 있는지 설명**해야 한다
- 추측에 근거한 일반성 : **만일의 경우를 대비한 코드를 추가하지 말고 필요한 기능만 추가하라**

#### 메서드 수준 코드 스멜
- 메서드가 많은 매개변수를 갖고 있으면 이 역시 또 다른 코드스멜이다

#### 클래스 수준 코드 스멜
- 큰 클래스가 기능이 너무 많아 더 이상 의미있는 추상화를 제공하지 못하는 경우

#### 코드베이스 수준 코드 스멜
- 코드베이스에는 중복 코드 또는 코드 클론이라고 부르는 코드 스멜이 있다
- 메소드들이 서로 정보를 계속해서 전달하는 경우인 메시지 체인도 코드 스멜의 예시이다

#### 코드 스멜의 영향
- 코드 스멜을 가지고 있는 코드는 오류가 있을 가능성이 높은 것으로 알려져 있다

### 9.1.2. 코드 스멜이 인지 과정에 악영향을 미치는 방식
#### 긴 매개변수 목록, 복잡한 스위치 문: 작업 기억 공간의 용량 초과
- 매개변수 목록이 길면 작업 기억 공간이 과부하를 가질 가능성이 높은 것은 사실이며, 복잡한 스위치 문도 마찬가지다

#### 신의 클래스, 긴 메서드: 효율적인 청킹이 불가능
- 모든 기능을 하나의 main() 함수에 두기보다는 **의미있는 이름을 갖는 별도의 작은 기능으로 나누자**
- 개별함수, 클래스, 메소드로 기능을 분할할 때의 이점은 **이름이 문서 역할을 하는 것**이다
  - 함수 및 클래스 이름은 **코드를 청킹할 수 있도록** 도와준다
- 신의 클래스와 긴 메서드와 같이 큰 코드 블록과 관련된 코드스멜이 좋지 않은 이유는 **코드를 빨리 이해하기 위한 결정적 특징이 많지 않고, 코드를 한 줄 한 줄 읽어야하기 때문이다**

#### 코드 클론: 청킹이 잘못됨
- 코드 클론 또는 중복 코드 스멜은 별차이 없는 코드가 계속해서 코드베이스에 추가될 때 발생한다

## 9.2. 나쁜 이름이 인지 부하에 미치는 영향
- 코드 스멜은 `구조적 안티패턴` 문제가 있는 코드다.
  - 코드가 잘 작성되었으나, **파악하기 어려운 구조로 만들어졌다는 것**을 의미한다
- 코드에는 `개념적 안티패턴` 도 있을 수 있는데, 코드가 짧은 메소드와 깔끔한 클래스로 올바르게 구성되어 있지만 **혼동되는 이름을 갖는 경우**다

### 9.2.1. 언어적 안티패턴
- 안티패턴은 언어적 요소가 수행하는 역할과 일치하지 않을 때 발생한다.
  - ex) isValid 같이 불리언으로 보이는 변수가 실제로 정수값 갖기
- 메서드나 함수가 하지 않는 일이 이름에 나타나는 경우
  - ex) getCustomers 메서드가 컬렉션을 반환하는게 아니라 하나의 불리언 값을 반환하는 경우
- 아나우도바의 6가지 언어적 안티패턴
  - 이름이 나타내는 것보다 더 많은 일을 하는 경우
  - 이름이 나타내는 것보다 더 적은 일을 하는 경우
  - 이름과 정반대의 일을 하는 경우
  - 개체에 포함된 것보다 더 많은 것을 가진 것처럼 보이는 경우
  - 개체에 포함된 것을 누락하는 경우
  - 개체에 포함된 것과 반대되는 경우

### 9.2.2. 인지 부하 측정
#### 눈 기반 측정
- 시선 추적 장치를 이용하여 사람들이 얼마나 집중하고 있는지 알 수 있다. 
  - ex) 눈을 얼마나 자주 깜빡이는지
- 작업이 어려울수록 동공 크기가 크게 측정되고, 인지부하도 더 커진다
  - 동공이 크면 눈이 더 많은 정보를 흡수할 수 있기 때문이다
#### 뇌전도
- 혈액에 산소 공급이 많아지면 인지 부하가 증가한 것이다

### 9.2.4. 언어적 안티패턴이 혼란을 일으키는 이유
- 익숙하지 않은 코드를 읽을 때 LTM은 관련 사실과 경험을 검색하는데, 충돌하는 이름을 읽게 되면 잘못된 정보가 주어질 수 있다
- 중복 코드처럼 '잘못된 청킹' 이 발생할 수 있고, 두뇌는 에너지를 절약하려고 노력하는 과정에서 잘못된 가정을 하게 될 수 있다

## 요약
- 중복 코드는 코드를 제대로 청킹하기 어렵게 만들고, 긴 매개변수 목록은 작업 기억 공간을 많이 차지한다
- 언어적 안티패턴이란 **코드가 실제 수행하는 작업과 맞지 않는 이름을 의미**하며, 높은 인지부하를 초래한다
  - 우리가 사고할 때 LTM이 돕는 과정에서 잘못된 사실을 발견하기에 일어날 수 있다
  - **실제로 구현되지 않은 코드의 의미를 가정하기에** 잘못된 청킹으로 이어질 수 있다

> 1. 하나의 메소드에 다 때려넣지 말고, 기능 자체를 추상화하여 별도의 작은 기능으로 나누어 메소드를 쪼개자! 
>    - 그래야 다른 사람들이 내 코드를 한줄 한줄 읽지 않아도 코드를 빠르게 이해할 수 있다.
> 2. 메서드, 변수명을 지을 때 그 메서드가 하는 일과 동일하도록 짓자